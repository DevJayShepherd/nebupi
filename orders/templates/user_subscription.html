{% extends 'sidebar_base.html' %}

{% load static %}

{% block title %}
  Subscription
{% endblock %}

{% block page_content %}
  <div class="card border-0">
    <!-- Card header -->
    <div class="card-header d-lg-flex justify-content-between align-items-center">
      <div class="mb-3 mb-lg-0">
        <h3 class="mb-0">My Subscription</h3>
        <p class="mb-0">Here is list of package/product that you have subscribed.</p>
      </div>
      <div>
        <a href="pricing.html" class="btn btn-success btn-sm">Upgrade Now â€” Go Pro $39.00</a>
      </div>
    </div>
    <!-- Card body -->
    {% if subscription %}
      <div class="card-body">
        <div class="border-bottom pt-0 pb-5">
          <div class="row mb-4">
            <div class="col-lg-6 col-md-8 col-7 mb-2 mb-lg-0">
              {% if subscription.is_active %}
                <span class="badge bg-success ms-2">Active</span>
              {% else %}
                <span class="badge bg-danger ms-2">Inactive</span>
              {% endif %}
            </div>
            <div class="col-lg-3 col-md-4 col-5 mb-2 mb-lg-0">
              <span>Auto Renewal: <span style="color: black">{{ subscription.plan.billing_frequency|lower }}</span></span>
            </div>
            <div class="col-lg-3 col-md-12 col-12 d-lg-flex align-items-start justify-content-end">
              <a href="#" class="btn btn-outline-primary btn-sm">Change Plan</a>
            </div>
          </div>
          <!-- Pricing data -->
          <div class="row">
            <div class="col-lg-3 col-md-3 col-6 mb-2 mb-lg-0">
              <span class="fs-6">Plan</span>
              <h6 class="mb-0">{{ subscription.plan.name }}</h6>
            </div>
            <div class="col-lg-3 col-md-3 col-6 mb-2 mb-lg-0">
              <span class="fs-6">Started On</span>
              <h6 class="mb-0">{{ subscription.start_date }}</h6>
            </div>
            <div class="col-lg-3 col-md-3 col-6 mb-2 mb-lg-0">
              <span class="fs-6">Price</span>
              <h6 class="mb-0">${{ subscription.plan.price|stringformat:'d' }}</h6>
            </div>
            <div class="col-lg-3 col-md-3 col-6 mb-2 mb-lg-0">
              <span class="fs-6">Next Billing Date</span>
              <h6 class="mb-0">{{ subscription.end_date }}</h6>
            </div>
          </div>
        </div>
      </div>
    {% else %}
      <div class="card border-0">
        <div class="card-body">
          <div class="text-center">
            <h4 class="my-4">You don't have any subscription yet.</h4>
            <a href="{% url 'pricing' %}" class="btn btn-primary animate-hover">Upgrade Now</a>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
{% endblock %}
